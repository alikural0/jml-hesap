<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>JML Dış Ticaret</title>

  <!-- PWA -->
  <link rel="manifest" href="./manifest.webmanifest">
  <meta name="theme-color" content="#0b0b0c">
  <link rel="apple-touch-icon" href="./icon-192.png">

  <style>
    :root{
      --bg:#0b0b0c;
      --text:rgba(255,255,255,.92);
      --muted:rgba(255,255,255,.62);
      --muted2:rgba(255,255,255,.45);
      --r:18px;
    }
    *{box-sizing:border-box}
    body{
      margin:0; min-height:100vh;
      background:
        radial-gradient(900px 600px at 20% 15%, rgba(255,255,255,.06), transparent 60%),
        radial-gradient(900px 600px at 80% 85%, rgba(255,255,255,.05), transparent 60%),
        linear-gradient(180deg, var(--bg), #070708);
      color:var(--text);
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;
      display:flex; justify-content:center;
      padding:22px 12px;
    }
    body::before{
      content:"";
      position:fixed; inset:0;
      pointer-events:none;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='160' height='160'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='160' height='160' filter='url(%23n)' opacity='.25'/%3E%3C/svg%3E");
      mix-blend-mode:overlay;
      opacity:.14;
    }
    body::after{
      content:"";
      position:fixed; inset:-200px;
      pointer-events:none;
      background:
        radial-gradient(600px 400px at 15% 10%, rgba(255,255,255,.10), transparent 60%),
        radial-gradient(700px 500px at 85% 30%, rgba(255,255,255,.08), transparent 60%),
        radial-gradient(700px 600px at 50% 95%, rgba(255,255,255,.06), transparent 60%);
      filter: blur(8px);
      opacity:.9;
    }

    .wrap{width:min(560px,100%); display:flex; flex-direction:column; gap:12px; position:relative; z-index:1}

    .topbar{
      display:flex; align-items:center; justify-content:space-between; gap:12px;
      padding:14px;
      border-radius:var(--r);
      background:linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.035));
      border:1px solid rgba(255,255,255,.12);
      box-shadow: 0 18px 70px rgba(0,0,0,.62);
      backdrop-filter: blur(14px);
    }
    .brand{display:flex; align-items:center; gap:12px; min-width:0}
    .brand img{
      height:40px; width:auto;
      background:#fff;
      border-radius:12px;
      padding:6px 8px;
      border:1px solid rgba(0,0,0,.08);
      box-shadow:0 10px 28px rgba(0,0,0,.35);
      flex:0 0 auto;
      image-rendering: -webkit-optimize-contrast;
    }
    .brand .text{display:flex; flex-direction:column; min-width:0}
    .brand b{
      font-size:14px; letter-spacing:.9px; font-weight:800;
      white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
    }
    .brand span{
      margin-top:3px;
      font-size:11px; letter-spacing:1.1px; text-transform:uppercase;
      color:var(--muted2);
      white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
    }

    .right{display:flex; align-items:center; gap:10px}
    .chip{
      padding:8px 10px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(255,255,255,.05);
      color:var(--muted);
      font-size:12px;
      white-space:nowrap;
      user-select:none;
    }
    .sel{
      height:34px; border-radius:999px;
      background:rgba(255,255,255,.05);
      border:1px solid rgba(255,255,255,.12);
      color:var(--text);
      padding:0 10px;
      outline:none;
      cursor:pointer;
      font-size:12px;
    }

    .card{
      border-radius:var(--r);
      background:linear-gradient(180deg, rgba(255,255,255,.075), rgba(255,255,255,.03));
      border:1px solid rgba(255,255,255,.12);
      box-shadow: 0 18px 70px rgba(0,0,0,.62);
      overflow:hidden;
      backdrop-filter: blur(14px);
    }

    .tabs{
      position:relative;
      display:flex;
      gap:8px;
      padding:10px;
      border-bottom:1px solid rgba(255,255,255,.08);
      overflow:auto;
      -webkit-overflow-scrolling: touch;
    }
    .tab{
      flex:0 0 auto;
      padding:0 14px;
      height:40px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.10);
      background:rgba(255,255,255,.04);
      color:var(--muted);
      cursor:pointer;
      font-size:13px;
      transition:.12s transform,.12s background,.12s color,.12s border-color;
      white-space:nowrap;
      touch-action:manipulation;
    }
    .tab:hover{transform:translateY(-1px); background:rgba(255,255,255,.06); color:var(--text); border-color:rgba(255,255,255,.14)}
    .tab.active{background:rgba(255,255,255,.10); color:var(--text); border-color:rgba(255,255,255,.18)}
    .tabs .ink{
      position:absolute; left:10px; bottom:8px;
      height:3px; width:60px;
      border-radius:999px;
      background:rgba(255,255,255,.55);
      box-shadow:0 10px 30px rgba(0,0,0,.35);
      transition:transform .18s ease, width .18s ease;
      opacity:.75;
      pointer-events:none;
    }

    .panel{display:none; padding:14px}
    .panel.active{display:block}

    .screen{
      width:100%; height:76px;
      border-radius:16px;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(0,0,0,.32);
      color:var(--text);
      padding:12px 14px;
      text-align:right;
      font-size:30px;
      outline:none;
    }
    .subline{
      margin-top:8px;
      display:flex; justify-content:space-between;
      flex-wrap:wrap; gap:10px;
      font-size:12px;
      color:var(--muted2);
    }

    .grid{
      margin-top:12px;
      display:grid;
      grid-template-columns:repeat(4,1fr);
      gap:10px;
      touch-action:manipulation;
      user-select:none;
    }
    button.key{
      height:56px;
      border-radius:16px;
      border:1px solid rgba(255,255,255,.10);
      background:rgba(255,255,255,.06);
      color:var(--text);
      font-size:18px;
      cursor:pointer;
      transition:.10s transform,.10s background,.10s border-color;
      box-shadow:
        inset 0 1px 0 rgba(255,255,255,.08),
        0 12px 30px rgba(0,0,0,.35);
      touch-action:manipulation;
    }
    button.key:hover{transform:translateY(-1px); background:rgba(255,255,255,.09); border-color:rgba(255,255,255,.16)}
    button.key:active{
      transform:translateY(0) scale(.99);
      box-shadow:
        inset 0 1px 0 rgba(255,255,255,.06),
        0 8px 18px rgba(0,0,0,.28);
    }
    .op{background:rgba(255,255,255,.07); border-color:rgba(255,255,255,.14)}
    .danger{background:rgba(255,255,255,.08); border-color:rgba(255,255,255,.14)}
    .good{background:rgba(255,255,255,.14); border-color:rgba(255,255,255,.20)}
    .wide{grid-column:span 2}
    .eq{grid-column:span 2}

    .row{display:flex; gap:10px; flex-wrap:wrap; align-items:center}
    .field{
      flex:1; min-width:150px;
      height:44px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(0,0,0,.26);
      color:var(--text);
      padding:0 12px;
      outline:none;
    }
    .btn{
      height:44px;
      padding:0 12px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.10);
      background:rgba(255,255,255,.05);
      color:var(--text);
      cursor:pointer;
      transition:.10s transform,.10s background;
      font-size:13px;
      white-space:nowrap;
      touch-action:manipulation;
    }
    .btn:hover{transform:translateY(-1px); background:rgba(255,255,255,.07)}
    .btn:active{transform:translateY(0) scale(.99)}

    .out{
      margin-top:10px;
      padding:12px 12px;
      border-radius:16px;
      border:1px solid rgba(255,255,255,.12);
      background:
        radial-gradient(700px 260px at 20% 0%, rgba(255,255,255,.08), transparent 60%),
        rgba(0,0,0,.22);
      font-size:13px;
      color:rgba(255,255,255,.88);
      line-height:1.55;
      word-break:break-word;
    }
    .hint{margin-top:10px; font-size:12px; color:var(--muted2); line-height:1.45}

    .listItem{border-bottom:1px solid rgba(255,255,255,.08); padding:10px 0}
    .listItem:last-child{border-bottom:none}

    @media (max-width:420px){
      .brand img{height:36px}
      .chip{display:none}
      .screen{font-size:26px; height:72px}
      button.key{height:54px}
    }
 /* ==== PREMIUM UPGRADE PACK ==== */

/* daha “cam” kartlar */
.topbar, .card{
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
}

/* yumuşak gölge + net border */
.card{
  border:1px solid rgba(255,255,255,.14);
  box-shadow: 0 24px 90px rgba(0,0,0,.70);
}

/* sekmeler: daha modern */
.tab{
  background: rgba(255,255,255,.045);
  border:1px solid rgba(255,255,255,.12);
}
.tab.active{
  background: rgba(255,255,255,.12);
  border-color: rgba(255,255,255,.20);
}

/* input ve ekranlar daha net */
.field, .screen{
  border-color: rgba(255,255,255,.14);
  background: rgba(0,0,0,.30);
}

/* butonlar daha “premium basma hissi” */
button.key, .btn{
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,.10),
    0 14px 36px rgba(0,0,0,.38);
}
button.key:hover, .btn:hover{
  transform: translateY(-1px);
}
button.key:active, .btn:active{
  transform: translateY(0) scale(.99);
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,.08),
    0 10px 22px rgba(0,0,0,.30);
}

/* sonuç alanı daha “kart” */
.out{
  background:
    radial-gradient(800px 320px at 15% 0%, rgba(255,255,255,.10), transparent 60%),
    rgba(0,0,0,.22);
  border-color: rgba(255,255,255,.14);
}

/* logo keskinliği */
.brand img{
  image-rendering: -webkit-optimize-contrast;
}

  
  </style>
</head>

<body>
  <div class="wrap">
    <div class="topbar">
      <div class="brand">
        <img src="logo.png" alt="JML Dış Ticaret">
        <div class="text">
          <b>JML DIŞ TİCARET</b>
          <span>HESAP • KDV • YÜZDE • KAR/ZARAR • KUR • İHRACAT • YORUMLAR</span>
        </div>
      </div>
      <div class="right">
        <select id="currency" class="sel" title="Gösterim para birimi">
          <option value="TRY" selected>₺ TL</option>
          <option value="USD">$ USD</option>
        </select>
        <div class="chip">Mobil: Dokun • Enter: =</div>
      </div>
    </div>
    
<div class="card">

  <!-- SEKME BAR -->
  <div class="tabs" id="tabs">
    <button class="tab active" data-tab="calc" type="button">Hesap</button>
    <button class="tab" data-tab="kdv" type="button">KDV</button>
    <button class="tab" data-tab="pct" type="button">Yüzde</button>
    <button class="tab" data-tab="profit" type="button">Kar/Zarar</button>
    <button class="tab" data-tab="fx" type="button">Kur</button>
    <button class="tab" data-tab="export" type="button">İhracat</button>
    <button class="tab" data-tab="comments" type="button">Yorumlar</button>

    <div class="ink" id="tabInk"></div>
  </div>
</div>

      <!-- HESAP -->
      <div class="panel active" id="panel-calc">
        <input id="screen" class="screen" value="0" readonly />
        <div class="subline">
          <span>⌫ Backspace • C Esc</span>
          <span id="miniInfo">—</span>
        </div>

        <div class="grid" id="grid">
          <button class="key danger" data-action="clear" type="button">C</button>
          <button class="key danger" data-action="back" type="button">⌫</button>
          <button class="key op" data-value="%" type="button">%</button>
          <button class="key op" data-value="/" type="button">÷</button>

          <button class="key" data-value="7" type="button">7</button>
          <button class="key" data-value="8" type="button">8</button>
          <button class="key" data-value="9" type="button">9</button>
          <button class="key op" data-value="*" type="button">×</button>

          <button class="key" data-value="4" type="button">4</button>
          <button class="key" data-value="5" type="button">5</button>
          <button class="key" data-value="6" type="button">6</button>
          <button class="key op" data-value="-" type="button">−</button>

          <button class="key" data-value="1" type="button">1</button>
          <button class="key" data-value="2" type="button">2</button>
          <button class="key" data-value="3" type="button">3</button>
          <button class="key op" data-value="+" type="button">+</button>

          <button class="key wide" data-value="0" type="button">0</button>
          <button class="key" data-value="." type="button">.</button>
          <button class="key good eq" data-action="equals" type="button">=</button>
        </div>

        <div class="hint">Para birimi seçimi (₺/$) gösterim içindir.</div>
      </div>

      <!-- KDV -->
      <div class="panel" id="panel-kdv">
        <div class="row">
          <select id="kdvRate" class="field" style="min-width:160px; flex:0 0 auto">
            <option value="1">KDV 1%</option>
            <option value="8">KDV 8%</option>
            <option value="10">KDV 10%</option>
            <option value="18" selected>KDV 18%</option>
            <option value="20">KDV 20%</option>
          </select>
          <button class="btn" id="netToBrut" type="button">Net → Brüt</button>
          <button class="btn" id="brutToNet" type="button">Brüt → Net</button>
        </div>
        <div class="out" id="kdvOut">Ekrandaki sayı üzerinden hesaplar.</div>
      </div>

      <!-- YÜZDE -->
      <div class="panel" id="panel-pct">
        <div class="row">
          <input id="baseA" class="field" type="text" inputmode="decimal" placeholder="A (taban) örn: 1.250,50" />
          <input id="percB" class="field" type="text" inputmode="decimal" placeholder="B (%) örn: 18" />
        </div>
        <div class="row">
          <button class="btn" id="aOfB" type="button">A'nın %B'si</button>
          <button class="btn" id="aPlusB" type="button">A + %B</button>
          <button class="btn" id="aMinusB" type="button">A - %B</button>
        </div>
        <div class="out" id="percOut">A ve B girip hesapla.</div>
        <div class="hint">TR (1.234,56) ve US (1,234.56) formatı otomatik anlaşılır.</div>
      </div>

      <!-- KAR/ZARAR -->
      <div class="panel" id="panel-profit">
        <div class="row">
          <input id="cost" class="field" type="text" inputmode="decimal" placeholder="Maliyet" />
          <input id="sell" class="field" type="text" inputmode="decimal" placeholder="Satış" />
        </div>
        <div class="row">
          <button class="btn" id="profitCalc" type="button">Hesapla</button>
          <button class="btn" id="swap" type="button">Yer değiştir</button>
        </div>
        <div class="out" id="profitOut">Maliyet ve satış girip “Hesapla”.</div>
        <div class="hint">Kâr = Satış − Maliyet • Kâr% (maliyet) • Marj% (satış)</div>
      </div>

      <!-- KUR (Manuel) -->
      <div class="panel" id="panel-fx">
        <div class="row">
          <input id="fxRate" class="field" type="text" inputmode="decimal" placeholder="Kur (örn: 35,50) — 1 USD/EUR = ? TRY" />
          <button class="btn" id="fxUseUSDTRY" type="button">USD/TRY</button>
          <button class="btn" id="fxUseEURTRY" type="button">EUR/TRY</button>
        </div>

        <div class="row" style="margin-top:10px">
          <input id="fxAmount" class="field" type="text" inputmode="decimal" placeholder="Tutar (örn 1000)" />
          <select id="fxFrom" class="field" style="min-width:140px; flex:0 0 auto">
            <option value="USD" selected>USD</option>
            <option value="TRY">TRY</option>
            <option value="EUR">EUR</option>
          </select>
          <select id="fxTo" class="field" style="min-width:140px; flex:0 0 auto">
            <option value="TRY" selected>TRY</option>
            <option value="USD">USD</option>
            <option value="EUR">EUR</option>
          </select>
          <button class="btn" id="fxConvert" type="button">Çevir</button>
        </div>

        <div class="out" id="fxOut">Kur girip çevir yapabilirsin.</div>
        <div class="hint">TCMB otomatik kur: sonraki güncelleme (CORS/Actions).</div>
      </div>

      <!-- İHRACAT -->
      <div class="panel" id="panel-export">
        <div class="row">
          <select id="incoterm" class="field" style="min-width:160px; flex:0 0 auto">
            <option value="FOB" selected>FOB</option>
            <option value="CFR">CFR</option>
            <option value="CIF">CIF</option>
            <option value="EXW">EXW</option>
          </select>

          <select id="expCur" class="field" style="min-width:140px; flex:0 0 auto">
            <option value="USD" selected>USD</option>
            <option value="EUR">EUR</option>
            <option value="GBP">GBP</option>
            <option value="TRY">TRY</option>
          </select>
        </div>

        <div class="row" style="margin-top:10px">
          <input id="goodsValue" class="field" type="text" inputmode="decimal" placeholder="Mal bedeli (örn 25000)" />
          <input id="freight" class="field" type="text" inputmode="decimal" placeholder="Navlun (örn 1200)" />
          <input id="insurance" class="field" type="text" inputmode="decimal" placeholder="Sigorta (örn 150)" />
        </div>

        <div class="row" style="margin-top:10px">
          <input id="inland" class="field" type="text" inputmode="decimal" placeholder="İç nakliye (örn 300)" />
          <input id="portFees" class="field" type="text" inputmode="decimal" placeholder="Liman masrafı (örn 200)" />
          <input id="commissionPct" class="field" type="text" inputmode="decimal" placeholder="Komisyon % (örn 2.5)" />
        </div>

        <div class="row" style="margin-top:10px">
          <input id="qty" class="field" type="text" inputmode="decimal" placeholder="Miktar (örn 3000)" />
          <input id="unitPrice" class="field" type="text" inputmode="decimal" placeholder="Birim fiyat (opsiyonel)" />
          <button class="btn" id="expCalc" type="button">Maliyet Hesapla</button>
        </div>

        <div class="row" style="margin-top:10px">
          <select id="profitBase" class="field" style="min-width:180px; flex:0 0 auto">
            <option value="FOB" selected>Hedef satış baz: FOB</option>
            <option value="CIF">Hedef satış baz: CIF</option>
          </select>
          <input id="targetProfitPct" class="field" type="text" inputmode="decimal" placeholder="Hedef kâr % (örn 12)" />
          <button class="btn" id="priceWithProfit" type="button">Satış Fiyatı</button>
        </div>

        <div class="out" id="expOut">FOB/CFR/CIF + masraflar + hedef satış burada.</div>
        <div class="hint">CFR = FOB + Navlun • CIF = CFR + Sigorta</div>
      </div>

      <!-- YORUMLAR -->
      <div class="panel" id="panel-comments">
        <div class="row">
          <input id="cName" class="field" type="text" placeholder="İsim (opsiyonel)" />
        </div>

        <div class="row" style="margin-top:10px">
          <input id="cText" class="field" type="text" maxlength="500" placeholder="Yorum yaz (max 500 karakter)..." />
          <button class="btn" id="cSend" type="button">Gönder</button>
        </div>

        <div class="out" id="cStatus">Bağlanıyor…</div>
        <div class="out" id="cList" style="margin-top:10px">Yorumlar yükleniyor…</div>

        <div class="hint">Yorumlar Firebase’de tutulur ve anlık güncellenir.</div>
      </div>
    </div>
  </div>

  <script src="./app.js" defer></script>
  <script type="module" src="./firebase-comments.js"></script>
</body>
</html>


